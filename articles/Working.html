<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<title>Working with Models • ramp.xds</title>
<!-- mathjax math --><script src="https://cdn.jsdelivr.net/npm/mathjax@3.2.2/es5/tex-mml-chtml.js" integrity="sha256-MASABpB4tYktI2Oitl4t+78w/lyA+D7b/s9GEP0JOGI=" crossorigin="anonymous"></script><script>
  window.MathJax = {
    chtml: {
      fontURL: "https://cdn.jsdelivr.net/npm/mathjax@3.2.2/es5/output/chtml/fonts/woff-v2"
    }
  };
</script><script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<link href="../deps/bootstrap-5.3.1/bootstrap.min.css" rel="stylesheet">
<script src="../deps/bootstrap-5.3.1/bootstrap.bundle.min.js"></script><link href="../deps/font-awesome-6.5.2/css/all.min.css" rel="stylesheet">
<link href="../deps/font-awesome-6.5.2/css/v4-shims.min.css" rel="stylesheet">
<script src="../deps/headroom-0.11.0/headroom.min.js"></script><script src="../deps/headroom-0.11.0/jQuery.headroom.min.js"></script><script src="../deps/bootstrap-toc-1.0.1/bootstrap-toc.min.js"></script><script src="../deps/clipboard.js-2.0.11/clipboard.min.js"></script><script src="../deps/search-1.0.0/autocomplete.jquery.min.js"></script><script src="../deps/search-1.0.0/fuse.min.js"></script><script src="../deps/search-1.0.0/mark.min.js"></script><!-- pkgdown --><script src="../pkgdown.js"></script><meta property="og:title" content="Working with Models">
</head>
<body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>


    <nav class="navbar navbar-expand-lg fixed-top bg-light" data-bs-theme="light" aria-label="Site navigation"><div class="container">

    <a class="navbar-brand me-2" href="../index.html">ramp.xds</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">1.0.4-1</small>


    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto">
<li class="active nav-item dropdown">
  <button class="nav-link dropdown-toggle" type="button" id="dropdown-articles" data-bs-toggle="dropdown" aria-expanded="false" aria-haspopup="true">Articles</button>
  <ul class="dropdown-menu" aria-labelledby="dropdown-articles">
<li><a class="dropdown-item" href="../articles/GettingStarted.html">Getting Started</a></li>
    <li><a class="dropdown-item" href="../articles/BasicSetup.html">Basic Setup</a></li>
    <li><a class="dropdown-item" href="../articles/Working.html">Working with the Model Object</a></li>
    <li><a class="dropdown-item" href="../articles/ex_534.html">The 5-3-4 Model</a></li>
    <li><a class="dropdown-item" href="../articles/Delays.html">Delay Equations</a></li>
    <li><a class="dropdown-item" href="../articles/Forcing.html">Ports &amp; Junctions</a></li>
    <li><a class="dropdown-item" href="../articles/DTS.html">Discrete Time Systems</a></li>
    <li><a class="dropdown-item" href="../articles/TraceFunctions.html">Functions</a></li>
  </ul>
</li>
<li class="nav-item dropdown">
  <button class="nav-link dropdown-toggle" type="button" id="dropdown-interfaces" data-bs-toggle="dropdown" aria-expanded="false" aria-haspopup="true">Interfaces</button>
  <ul class="dropdown-menu" aria-labelledby="dropdown-interfaces">
<li><a class="dropdown-item" href="../articles/modular_forms.html">Modular Forms</a></li>
    <li><a class="dropdown-item" href="../articles/EggLaying.html">Habitats &amp; Mosquito Ecology</a></li>
    <li><a class="dropdown-item" href="../articles/BloodFeeding.html">Blood Feeding &amp; Transmission</a></li>
    <li><a class="dropdown-item" href="../articles/Exposure.html">Exposure</a></li>
  </ul>
</li>
<li class="nav-item dropdown">
  <button class="nav-link dropdown-toggle" type="button" id="dropdown-human-host" data-bs-toggle="dropdown" aria-expanded="false" aria-haspopup="true">Human / Host</button>
  <ul class="dropdown-menu" aria-labelledby="dropdown-human-host">
<li><a class="dropdown-item" href="../articles/XH-interface.html">The XH Component</a></li>
    <li><a class="dropdown-item" href="../articles/human_sis.html">SIS model</a></li>
    <li><a class="dropdown-item" href="../articles/human_hmoi.html">MoI hybrid model</a></li>
  </ul>
</li>
<li class="nav-item dropdown">
  <button class="nav-link dropdown-toggle" type="button" id="dropdown-adult-mosquitoes" data-bs-toggle="dropdown" aria-expanded="false" aria-haspopup="true">Adult Mosquitoes</button>
  <ul class="dropdown-menu" aria-labelledby="dropdown-adult-mosquitoes">
<li><a class="dropdown-item" href="../articles/MY-interface.html">The MY Component</a></li>
    <li><a class="dropdown-item" href="../articles/adult_RM.html">Macdonald's Model</a></li>
    <li><a class="dropdown-item" href="../articles/RM-dts-Mosquito.html">Ross-Macdonald - discrete time</a></li>
    <li><a class="dropdown-item" href="../articles/adult_GeRM.html">Generalized Ross-Macdonald model</a></li>
  </ul>
</li>
<li class="nav-item dropdown">
  <button class="nav-link dropdown-toggle" type="button" id="dropdown-immature-mosquitoes" data-bs-toggle="dropdown" aria-expanded="false" aria-haspopup="true">Immature Mosquitoes</button>
  <ul class="dropdown-menu" aria-labelledby="dropdown-immature-mosquitoes">
<li><a class="dropdown-item" href="../articles/L-interface.html">The L Component</a></li>
    <li><a class="dropdown-item" href="../articles/aqua_trace.html">Emergence (the trivial module)</a></li>
    <li><a class="dropdown-item" href="../articles/aqua_basic.html">basicL</a></li>
  </ul>
</li>
<li class="nav-item"><a class="nav-link" href="../reference/index.html">Functions</a></li>
      </ul>
<ul class="navbar-nav">
<li class="nav-item"><a class="external-link nav-link" href="https://github.com/dd-harp/ramp.xds/"><span class="fa fa-github"></span></a></li>
      </ul>
</div>


  </div>
</nav><div class="container template-article">




<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">

      <h1>Working with Models</h1>
            
      
      <small class="dont-index">Source: <a href="https://github.com/dd-harp/ramp.xds/blob/main/vignettes/Working.Rmd" class="external-link"><code>vignettes/Working.Rmd</code></a></small>
      <div class="d-none name"><code>Working.Rmd</code></div>
    </div>

    
    
<p>Previous: <a href="BasicSetup.html"><em>Basic Setup.</em></a> Also,
see <a href="https://faculty.washington.edu/smitdave/simba/index.html" class="external-link"><strong>SimBA</strong></a></p>
<hr>
<div class="section level2">
<h2 id="section"></h2>
<p><strong><code>ramp.xds</code></strong> was designed to reduce the
costs of model building and computation for malaria and other
mosquito-transmitted pathogens. One of the core challenges for the
software was to provide users with a set of utilities that would make it
easy to do work with models after they’ve been built.</p>
<div class="section level3">
<h3 id="set-up">Set Up<a class="anchor" aria-label="anchor" href="#set-up"></a>
</h3>
<div class="sourceCode" id="cb1"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://dd-harp.github.io/ramp.xds/">ramp.xds</a></span><span class="op">)</span></span></code></pre></div>
<p>The function <code>xds_setup</code> was discussed in <a href="https://dd-harp.github.io/ramp.xds/articles/GettingStarted.html">Getting
Started</a>.</p>
<div class="sourceCode" id="cb2"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">mod</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/xds_setup.html">xds_setup</a></span><span class="op">(</span>Xname <span class="op">=</span> <span class="st">"SIS"</span>, MYname <span class="op">=</span> <span class="st">"SI"</span>, Lname <span class="op">=</span> <span class="st">"basicL"</span><span class="op">)</span></span></code></pre></div>
<div class="sourceCode" id="cb3"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">mod</span><span class="op">$</span><span class="va">MYname</span></span></code></pre></div>
<pre><code><span><span class="co">## [1] "SI"</span></span></code></pre>
</div>
<div class="section level3">
<h3 id="solving">Solving<a class="anchor" aria-label="anchor" href="#solving"></a>
</h3>
<p>The functions <code>xds_solve</code> can be called to solve dynamical
systems. In these systems, <em>time</em> is the independent variable.
Given a set of initial values, <code>xds_solve</code> or
<code>dts_solve</code> compute the values of the dependent variables at
those time points. Other functions return stable orbits for models with
a canonical seasonal signal.</p>
<div class="sourceCode" id="cb5"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">mod</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/xds_solve.html">xds_solve</a></span><span class="op">(</span><span class="va">mod</span><span class="op">)</span></span></code></pre></div>
</div>
<div class="section level3">
<h3 id="outputs">Outputs<a class="anchor" aria-label="anchor" href="#outputs"></a>
</h3>
<p>The variables and terms are returned as raw and parsed outputs:</p>
<ul>
<li><p>raw outputs are returned in tabular form</p></li>
<li><p>outputs are parsed into named lists; the values of the dependent
variables can be retrieved by name.</p></li>
<li><p>dynamical terms are computed and returned.</p></li>
</ul>
<div class="sourceCode" id="cb6"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/base/names.html" class="external-link">names</a></span><span class="op">(</span><span class="va">mod</span><span class="op">$</span><span class="va">outputs</span><span class="op">)</span></span></code></pre></div>
<pre><code><span><span class="co">## [1] "deout"  "time"   "last_y" "orbits"</span></span></code></pre>
</div>
<div class="section level3">
<h3 id="visualize">Visualize<a class="anchor" aria-label="anchor" href="#visualize"></a>
</h3>
<p>a family of functions makes it easy to plot basic outputs of the
models.</p>
<div class="sourceCode" id="cb8"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="../reference/xds_plot_M.html">xds_plot_M</a></span><span class="op">(</span><span class="va">mod</span><span class="op">)</span></span></code></pre></div>
<p><img src="Working_files/figure-html/unnamed-chunk-7-1.png" width="576"></p>
</div>
<div class="section level3">
<h3 id="initial-values">Initial Values<a class="anchor" aria-label="anchor" href="#initial-values"></a>
</h3>
<p>A set of utilities was developed to work with initial values, making
it easy to change the intitial values through a function call. In
solving, <code>xds_solve</code> calls <code>get_inits</code> with a
<code>flatten=TRUE</code></p>
<div class="sourceCode" id="cb9"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="../reference/get_inits.html">get_inits</a></span><span class="op">(</span><span class="va">mod</span>, flatten<span class="op">=</span><span class="cn">TRUE</span><span class="op">)</span></span></code></pre></div>
<pre><code><span><span class="co">## [1]    1    5    1 1000    1</span></span></code></pre>
<p>With the default, <code>flatten=FALSE</code>, <code>get_inits</code>
returns a named list that is easy to read:</p>
<div class="sourceCode" id="cb11"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="../reference/get_inits.html">get_inits</a></span><span class="op">(</span><span class="va">mod</span><span class="op">)</span></span></code></pre></div>
<pre><code><span><span class="co">## $L</span></span>
<span><span class="co">## $L$L</span></span>
<span><span class="co">## [1] 1</span></span>
<span><span class="co">## </span></span>
<span><span class="co">## </span></span>
<span><span class="co">## $MY</span></span>
<span><span class="co">## $MY$M</span></span>
<span><span class="co">## [1] 5</span></span>
<span><span class="co">## </span></span>
<span><span class="co">## $MY$Y</span></span>
<span><span class="co">## [1] 1</span></span>
<span><span class="co">## </span></span>
<span><span class="co">## </span></span>
<span><span class="co">## $X</span></span>
<span><span class="co">## $X$H</span></span>
<span><span class="co">## [1] 1000</span></span>
<span><span class="co">## </span></span>
<span><span class="co">## $X$I</span></span>
<span><span class="co">## [1] 1</span></span></code></pre>
<p>Since it is a named list, it’s easy to examine a specific element in
that list:</p>
<div class="sourceCode" id="cb13"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="../reference/get_inits.html">get_inits</a></span><span class="op">(</span><span class="va">mod</span><span class="op">)</span><span class="op">$</span><span class="va">MY</span></span></code></pre></div>
<pre><code><span><span class="co">## $M</span></span>
<span><span class="co">## [1] 5</span></span>
<span><span class="co">## </span></span>
<span><span class="co">## $Y</span></span>
<span><span class="co">## [1] 1</span></span></code></pre>
</div>
<div class="section level3">
<h3 id="parameters">Parameters<a class="anchor" aria-label="anchor" href="#parameters"></a>
</h3>
<p>Another set of utilities was developed to change parameter values
through a function call.</p>
</div>
<div class="section level3">
<h3 id="analyze">Analyze<a class="anchor" aria-label="anchor" href="#analyze"></a>
</h3>
<p>The software includes functions that perform various analytical
tasks:</p>
<ul>
<li><p>Compute the steady states of model components using a method that
does not involve simulation. These functions also provide a way of
independently verifying the code.</p></li>
<li><p>Compute stable orbits.</p></li>
<li><p>Compute vectorial capacity and its spatial-temporal dispersion,
the human transmitting capacity and its spatial-temporal dispersion, and
malaria reproductive numbers as pseudo-threshold conditions.</p></li>
</ul>
</div>
<div class="section level3">
<h3 id="modifying-models">Modifying Models<a class="anchor" aria-label="anchor" href="#modifying-models"></a>
</h3>
<p><strong><code>ramp.xds</code></strong> has built-in utilities to make
it easy to work with the models, including functions to visualize the
outputs, to examine and change initial values and parameters, and to
analyze the models.</p>
<p>The <strong><code>xds</code> model object</strong> – any object that
can be solved by <code>xds_solve</code> or <code>dts_solve</code> – is a
compound list in R. If you’re already familiar with the format of the
<strong><code>xds</code></strong> model object, it’s possible examine
any part of it, or change any of the parameter values or initial
conditions. While that might be the way to go in the long run, the
<strong><code>xds</code> model object</strong> includes a set of
utilities to retrieve initial values, parameters, and some other values
of interests.</p>
<p>The code and documentation for these utilities is designed to be
instructive, and a goal for <strong><code>ramp.xds</code></strong> has
been to provide detailed documentation, include references to peer
reviewed journal articles.</p>
<p>Some of the values affect the rigid interfaces for egg laying and
emergence and for blood feeding and transmission, so changing the values
without updating the interface would create a model that was internally
inconsistent. To handle this, <strong><code>ramp.xds</code></strong> has
introduced functions to make it easy to change values after setup.</p>
<p>From the user perspective, using these
<strong><code>change_</code></strong> functions will make it easy to
avoid various errors. There are three kinds of functions:</p>
<ul>
<li>
<p>Changing a quantity that affects some part of an interface:</p>
<ul>
<li><p>Human population density</p></li>
<li><p>The mosquito dispersal matrix</p></li>
<li><p>The time spent matrix</p></li>
</ul>
</li>
<li><p>Changing initial values, except human / host population
density:</p></li>
<li><p>Changing parameter values.</p></li>
</ul>
<p><strong>Modification</strong> of any features of a model, but some of
these features are:</p>
<ul>
<li><p><code>change_H</code></p></li>
<li><p><code>change_calK</code></p></li>
<li><p><code>change_*par</code></p></li>
<li><p><code>change_*inits</code></p></li>
</ul>
<p>To build a model with the features you want. The goal of software
design was to make it possible to do almost anything, but there were
some important constraints.</p>
</div>
<div class="section level3">
<h3 id="structural-parameters">Structural Parameters<a class="anchor" aria-label="anchor" href="#structural-parameters"></a>
</h3>
<p>Some changes affect the model’s <em>structure.</em> These are
considered <strong>advanced options</strong> for model building, and
they are dealt with in separate vignettes. Structural changes
include:</p>
<ul>
<li><p>changing the number of population strata</p></li>
<li><p>changing the number of patches</p></li>
<li><p>adding or removing aquatic habitats</p></li>
<li><p>adding vertebrate host species</p></li>
<li><p>adding vector species</p></li>
</ul>
</div>
</div>
  </main><aside class="col-md-3"><nav id="toc" aria-label="Table of contents"><h2>On this page</h2>
    </nav></aside>
</div>



    <footer><div class="pkgdown-footer-left">
  <p>Developed by David L. Smith, Sean L. Wu.</p>
</div>

<div class="pkgdown-footer-right">
  <p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.1.3.</p>
</div>

    </footer>
</div>





  </body>
</html>
