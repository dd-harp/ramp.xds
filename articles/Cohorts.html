<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<title>Cohort Dynamics • ramp.xds</title>
<!-- mathjax math --><script src="https://cdn.jsdelivr.net/npm/mathjax@3.2.2/es5/tex-mml-chtml.js" integrity="sha256-MASABpB4tYktI2Oitl4t+78w/lyA+D7b/s9GEP0JOGI=" crossorigin="anonymous"></script><script>
  window.MathJax = {
    chtml: {
      fontURL: "https://cdn.jsdelivr.net/npm/mathjax@3.2.2/es5/output/chtml/fonts/woff-v2"
    }
  };
</script><script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<link href="../deps/bootstrap-5.3.1/bootstrap.min.css" rel="stylesheet">
<script src="../deps/bootstrap-5.3.1/bootstrap.bundle.min.js"></script><link href="../deps/font-awesome-6.5.2/css/all.min.css" rel="stylesheet">
<link href="../deps/font-awesome-6.5.2/css/v4-shims.min.css" rel="stylesheet">
<script src="../deps/headroom-0.11.0/headroom.min.js"></script><script src="../deps/headroom-0.11.0/jQuery.headroom.min.js"></script><script src="../deps/bootstrap-toc-1.0.1/bootstrap-toc.min.js"></script><script src="../deps/clipboard.js-2.0.11/clipboard.min.js"></script><script src="../deps/search-1.0.0/autocomplete.jquery.min.js"></script><script src="../deps/search-1.0.0/fuse.min.js"></script><script src="../deps/search-1.0.0/mark.min.js"></script><!-- pkgdown --><script src="../pkgdown.js"></script><meta property="og:title" content="Cohort Dynamics">
</head>
<body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>


    <nav class="navbar navbar-expand-lg fixed-top bg-light" data-bs-theme="light" aria-label="Site navigation"><div class="container">

    <a class="navbar-brand me-2" href="../index.html">ramp.xds</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">0.99-3</small>


    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto">
<li class="nav-item dropdown">
  <button class="nav-link dropdown-toggle" type="button" id="dropdown-articles" data-bs-toggle="dropdown" aria-expanded="false" aria-haspopup="true">Articles</button>
  <ul class="dropdown-menu" aria-labelledby="dropdown-articles">
<li><a class="dropdown-item" href="../articles/GettingStarted.html">Getting Started</a></li>
    <li><a class="dropdown-item" href="../articles/BasicSetup.html">Basic Setup</a></li>
    <li><a class="dropdown-item" href="../articles/modular_forms.html">Modular Forms</a></li>
    <li><a class="dropdown-item" href="../articles/Exposure.html">Exposure</a></li>
    <li><a class="dropdown-item" href="../articles/Contributing.html">Contributing</a></li>
  </ul>
</li>
<li class="nav-item dropdown">
  <button class="nav-link dropdown-toggle" type="button" id="dropdown-adult-mosquitoes" data-bs-toggle="dropdown" aria-expanded="false" aria-haspopup="true">Adult Mosquitoes</button>
  <ul class="dropdown-menu" aria-labelledby="dropdown-adult-mosquitoes">
<li><a class="dropdown-item" href="../articles/adult_RM.html">Macdonald's Model</a></li>
    <li><a class="dropdown-item" href="../articles/RM-dts-Mosquito.html">Ross-Macdonald - discrete time</a></li>
    <li><a class="dropdown-item" href="../articles/adult_GeRM.html">Generalized Ross-Macdonald model</a></li>
  </ul>
</li>
<li class="nav-item dropdown">
  <button class="nav-link dropdown-toggle" type="button" id="dropdown-immature-mosquitoes" data-bs-toggle="dropdown" aria-expanded="false" aria-haspopup="true">Immature Mosquitoes</button>
  <ul class="dropdown-menu" aria-labelledby="dropdown-immature-mosquitoes">
<li><a class="dropdown-item" href="../articles/aqua_trace.html">Emergence (the trivial module)</a></li>
    <li><a class="dropdown-item" href="../articles/aqua_basic.html">basicL</a></li>
  </ul>
</li>
<li class="nav-item dropdown">
  <button class="nav-link dropdown-toggle" type="button" id="dropdown-human-host" data-bs-toggle="dropdown" aria-expanded="false" aria-haspopup="true">Human / Host</button>
  <ul class="dropdown-menu" aria-labelledby="dropdown-human-host">
<li><a class="dropdown-item" href="../articles/human_sis.html">SIS model</a></li>
    <li><a class="dropdown-item" href="../articles/human_hmoi.html">MoI hybrid model</a></li>
  </ul>
</li>
<li class="nav-item"><a class="nav-link" href="../reference/index.html">Functions</a></li>
      </ul>
<ul class="navbar-nav">
<li class="nav-item"><a class="external-link nav-link" href="https://github.com/dd-harp/ramp.xds/"><span class="fa fa-github"></span></a></li>
      </ul>
</div>


  </div>
</nav><div class="container template-article">




<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">

      <h1>Cohort Dynamics</h1>
            
      
      <small class="dont-index">Source: <a href="https://github.com/dd-harp/ramp.xds/blob/main/vignettes/Cohorts.Rmd" class="external-link"><code>vignettes/Cohorts.Rmd</code></a></small>
      <div class="d-none name"><code>Cohorts.Rmd</code></div>
    </div>

    
    
<div class="sourceCode" id="cb1"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://dd-harp.github.io/ramp.xds/">ramp.xds</a></span><span class="op">)</span></span></code></pre></div>
<p>In <strong><code>ramp.xds</code>,</strong> there are three different
ways of simulating malaria epidemiology in isolation. These are set up
using different setup functions:</p>
<ul>
<li><p><code>xds_setup_human</code> sets up a full <strong>X</strong>
component model, including a time spent matrix. The <code>trivial</code>
<strong>MYZ</strong> module is calibrates the model <code>F_fqZ,</code>
and the model computes the dEIR as an output.</p></li>
<li><p><code>xds_setup_eir</code> sets up an <strong>X</strong>
component for a single human population stratum. The user configures a
function <code>F_eir.</code> Solutions to these models uses
<code>xds_solve.eir</code></p></li>
<li><p><code>xds_setup_cohort</code> sets up an <strong>X</strong>
component for a single human population birth cohort as it ages. The
user configures a function <code>F_eir</code> that computes the average
EIR in the population with respect to time. The model for exposure
translates population EIR into the specific pattern of exposure
experienced by the cohort born on day <span class="math inline">\(\tau\)</span> using the identity <span class="math inline">\(t = a + \tau,\)</span> and adding an age-specific
frailty <span class="math inline">\(\omega(a).\)</span> Solutions use
<code>xds_solve_cohort,</code> which accepts the cohort’s birthday as an
optional argument. If <span class="math inline">\(\omega(a) =
1\)</span>, and <span class="math inline">\(\tau=0,\)</span> then
<code>xds_solve.eir</code> and <code>xds_solve_cohort</code> would give
the same answers.</p></li>
</ul>
<div class="section level2">
<h2 id="example">Example<a class="anchor" aria-label="anchor" href="#example"></a>
</h2>
<p>To illustrate, we set up the same model using three different setup
functions.</p>
<div class="sourceCode" id="cb2"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">Sp</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/makepar_F_sin.html">makepar_F_sin</a></span><span class="op">(</span><span class="op">)</span></span>
<span><span class="va">F_s</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/make_function.html">make_function</a></span><span class="op">(</span><span class="va">Sp</span><span class="op">)</span></span>
<span><span class="va">Tp</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/makepar_F_spline.html">makepar_F_spline</a></span><span class="op">(</span>tt<span class="op">=</span><span class="fl">365</span><span class="op">*</span><span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">0</span><span class="op">:</span><span class="fl">5</span><span class="op">)</span>, yy<span class="op">=</span><span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">1</span>,<span class="fl">1</span>,<span class="fl">1.6</span>,<span class="fl">.3</span>,<span class="fl">.7</span>,<span class="fl">1</span><span class="op">)</span><span class="op">)</span></span>
<span><span class="va">F_t</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/make_function.html">make_function</a></span><span class="op">(</span><span class="va">Tp</span><span class="op">)</span></span></code></pre></div>
<div class="sourceCode" id="cb3"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">tt</span> <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/seq.html" class="external-link">seq</a></span><span class="op">(</span><span class="fl">0</span>, <span class="fl">5</span><span class="op">*</span><span class="fl">365</span>, by <span class="op">=</span> <span class="fl">10</span><span class="op">)</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/graphics/plot.default.html" class="external-link">plot</a></span><span class="op">(</span><span class="va">tt</span>, <span class="fu">F_s</span><span class="op">(</span><span class="va">tt</span><span class="op">)</span>, type <span class="op">=</span><span class="st">"l"</span>, ylab <span class="op">=</span> <span class="st">"Seasonality, Trend"</span>, xlab <span class="op">=</span> <span class="st">"Time (in Days)"</span><span class="op">)</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/graphics/lines.html" class="external-link">lines</a></span><span class="op">(</span><span class="va">tt</span>, <span class="fu">F_t</span><span class="op">(</span><span class="va">tt</span><span class="op">)</span>, type <span class="op">=</span><span class="st">"l"</span><span class="op">)</span></span></code></pre></div>
<p><img src="Cohorts_files/figure-html/unnamed-chunk-3-1.png" width="576"></p>
<div class="sourceCode" id="cb4"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">opts</span> <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span>Z<span class="op">=</span><span class="fl">2000</span><span class="op">/</span><span class="fl">365</span>, season_par <span class="op">=</span> <span class="va">Sp</span>, trend_par <span class="op">=</span> <span class="va">Tp</span><span class="op">)</span></span>
<span><span class="va">mod_human</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/xds_setup_human.html">xds_setup_human</a></span><span class="op">(</span>HPop<span class="op">=</span><span class="fl">1000</span>, MYZopts <span class="op">=</span> <span class="va">opts</span><span class="op">)</span></span>
<span><span class="va">mod_human</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/xds_solve.html">xds_solve</a></span><span class="op">(</span><span class="va">mod_human</span>, Tmax<span class="op">=</span><span class="fl">5</span><span class="op">*</span><span class="fl">365</span>, dt<span class="op">=</span><span class="fl">10</span><span class="op">)</span></span>
<span><span class="fu"><a href="../reference/xds_plot_PR.html">xds_plot_PR</a></span><span class="op">(</span><span class="va">mod_human</span><span class="op">)</span></span></code></pre></div>
<p><img src="Cohorts_files/figure-html/unnamed-chunk-4-1.png" width="576"></p>
<p>With this value of <span class="math inline">\(Z\)</span> and a
population size of <span class="math inline">\(H=1000\)</span>, the
scaling function gives us an annual EIR of 2.</p>
<div class="sourceCode" id="cb5"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">mod_eir</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/xds_setup_eir.html">xds_setup_eir</a></span><span class="op">(</span>eir<span class="op">=</span><span class="fl">2</span><span class="op">/</span><span class="fl">365</span>, season_par <span class="op">=</span> <span class="va">Sp</span>, trend_par <span class="op">=</span> <span class="va">Tp</span><span class="op">)</span></span>
<span><span class="va">mod_eir</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/xds_solve.html">xds_solve</a></span><span class="op">(</span><span class="va">mod_eir</span>, Tmax<span class="op">=</span><span class="fl">365</span><span class="op">*</span><span class="fl">5</span>, dt<span class="op">=</span><span class="fl">10</span><span class="op">)</span></span>
<span><span class="fu"><a href="../reference/xds_plot_PR.html">xds_plot_PR</a></span><span class="op">(</span><span class="va">mod_eir</span><span class="op">)</span></span></code></pre></div>
<p><img src="Cohorts_files/figure-html/unnamed-chunk-5-1.png" width="576"></p>
<div class="sourceCode" id="cb6"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">mod_cohort</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/xds_setup_cohort.html">xds_setup_cohort</a></span><span class="op">(</span>eir<span class="op">=</span><span class="fl">2</span><span class="op">/</span><span class="fl">365</span>, season_par <span class="op">=</span> <span class="va">Sp</span>, trend_par <span class="op">=</span> <span class="va">Tp</span><span class="op">)</span></span>
<span><span class="va">mod_cohort</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/xds_solve_cohort.html">xds_solve_cohort</a></span><span class="op">(</span><span class="va">mod_cohort</span>, A<span class="op">=</span><span class="fl">5</span>, da<span class="op">=</span><span class="fl">10</span><span class="op">)</span></span>
<span><span class="fu"><a href="../reference/xds_plot_PR.html">xds_plot_PR</a></span><span class="op">(</span><span class="va">mod_cohort</span><span class="op">)</span></span></code></pre></div>
<p><img src="Cohorts_files/figure-html/unnamed-chunk-6-1.png" width="576"></p>
</div>
  </main>
</div>



    <footer><div class="pkgdown-footer-left">
  <p>Developed by Sean L. Wu, David L. Smith.</p>
</div>

<div class="pkgdown-footer-right">
  <p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.1.3.</p>
</div>

    </footer>
</div>





  </body>
</html>
