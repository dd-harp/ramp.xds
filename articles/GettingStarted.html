<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Getting Started • ramp.xds</title>
<!-- jquery --><script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.7.1/jquery.min.js" integrity="sha512-v2CJ7UaYy4JwqLDIrZUI/4hqeoQieOmAZNXBeQyjo21dadnwR+8ZaIJVT8EE2iyI61OV8e6M8PP2/4hpQINQ/g==" crossorigin="anonymous" referrerpolicy="no-referrer"></script><!-- Bootstrap --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/css/bootstrap.min.css" integrity="sha256-bZLfwXAP04zRMK2BjiO8iu9pf4FbLqX6zitd+tIvLhE=" crossorigin="anonymous">
<script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/js/bootstrap.min.js" integrity="sha256-nuL8/2cJ5NDSSwnKD8VqreErSWHtnEP9E7AySL+1ev4=" crossorigin="anonymous"></script><!-- bootstrap-toc --><link rel="stylesheet" href="../bootstrap-toc.css">
<script src="../bootstrap-toc.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous">
<!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- pkgdown --><link href="../pkgdown.css" rel="stylesheet">
<script src="../pkgdown.js"></script><meta property="og:title" content="Getting Started">
<!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->
</head>
<body data-spy="scroll" data-target="#toc">


    <div class="container template-article">
      <header><div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="../index.html">ramp.xds</a>
        <span class="version label label-default" data-toggle="tooltip" data-placement="bottom" title="">0.98</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" data-bs-toggle="dropdown" aria-expanded="false">
    Articles

    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
<li>
      <a href="../articles/GettingStarted.html">Getting Started with ramp.xds</a>
    </li>
    <li>
      <a href="../articles/Working.html">Working with Models in ramp.xds</a>
    </li>
    <li>
      <a href="../articles/TraceFunctions.html">Trace Functions</a>
    </li>
    <li>
      <a href="../articles/Understanding_ramp.xds.html">Understanding ramp.xds</a>
    </li>
    <li>
      <a href="../articles/modular_forms.html">Modular Forms for Disease Dynamics</a>
    </li>
    <li>
      <a href="../articles/ex_534.html">5-3-4 Spatial Example</a>
    </li>
    <li>
      <a href="../articles/spat_metric.html">Spatial Metrics</a>
    </li>
    <li>
      <a href="../articles/vc_lemenach.html">Vector Control Example</a>
    </li>
    <li>
      <a href="../articles/heterogeneous_transmission.html">Heterogeneous Transmission</a>
    </li>
    <li>
      <a href="../articles/Nimble.html">Nimble Model Building and Scaling Complexity</a>
    </li>
    <li>
      <a href="../articles/Contributing.html">Contributing</a>
    </li>
  </ul>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" data-bs-toggle="dropdown" aria-expanded="false">
    Mosquito - Adult

    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
<li>
      <a href="../articles/adult_RM.html">Ross-Macdonald model</a>
    </li>
    <li>
      <a href="../articles/RM-dts-Mosquito.html">Ross-Macdonald, discrete time</a>
    </li>
    <li>
      <a href="../articles/adult_GeRM.html">Generalized Ross-Macdonald model</a>
    </li>
  </ul>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" data-bs-toggle="dropdown" aria-expanded="false">
    Mosquito - Aquatic

    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
<li>
      <a href="../articles/aqua_trace.html">Aquatic - Trivial (forced) model</a>
    </li>
    <li>
      <a href="../articles/aqua_basic.html">Basic Competition</a>
    </li>
  </ul>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" data-bs-toggle="dropdown" aria-expanded="false">
    Human / Host

    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
<li>
      <a href="../articles/human_sis.html">SIS model</a>
    </li>
    <li>
      <a href="../articles/human_hmoi.html">MoI hybrid model</a>
    </li>
  </ul>
</li>
<li>
  <a href="../reference/index.html">Functions</a>
</li>
      </ul>
<ul class="nav navbar-nav navbar-right">
<li>
  <a href="https://github.com/dd-harp/ramp.xds/" class="external-link">
    <span class="fa fa-github"></span>

  </a>
</li>
      </ul>
</div>
<!--/.nav-collapse -->
  </div>
<!--/.container -->
</div>
<!--/.navbar -->



      </header><div class="row">
  <div class="col-md-9 contents">
    <div class="page-header toc-ignore">
      <h1 data-toc-skip>Getting Started</h1>
            <h3 data-toc-skip class="subtitle">Demonstrating the
Capabilities of ramp.xds</h3>
            
      
      <small class="dont-index">Source: <a href="https://github.com/dd-harp/ramp.xds/blob/main/vignettes/GettingStarted.Rmd" class="external-link"><code>vignettes/GettingStarted.Rmd</code></a></small>
      <div class="hidden name"><code>GettingStarted.Rmd</code></div>

    </div>

    
    
<div class="section level2">
<h2 id="section"></h2>
<p><strong><code>ramp.xds</code></strong> was developed to reduce the
costs of building, solving, analyzing, and using models describing the
epidemiology, transmission dynamics and control of malaria and other
mosquito-transmitted pathogens. This vignette gives a demonstration and
a basic introduction. Another useful vignette is a primer for working
with the <strong><code>xds</code></strong> <em>model object</em>, called
<a href="Working.html">Working with Models in
<strong><code>ramp.xds</code></strong></a>.</p>
<div class="section level3">
<h3 id="installation">Installation<a class="anchor" aria-label="anchor" href="#installation"></a>
</h3>
<p>The software was developed in RStudio. To download the R package, run
these commands:</p>
<div class="sourceCode" id="cb1"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://devtools.r-lib.org/" class="external-link">devtools</a></span><span class="op">)</span></span>
<span><span class="fu">devtools</span><span class="fu">::</span><span class="fu">install_github</span><span class="op">(</span><span class="st">"dd-harp/ramp.xds"</span><span class="op">)</span></span></code></pre></div>
<p>Then load <strong><code>ramp.xds</code></strong>:</p>
<div class="sourceCode" id="cb2"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://dd-harp.github.io/ramp.xds/">ramp.xds</a></span><span class="op">)</span></span></code></pre></div>
</div>
<div class="section level3">
<h3 id="demo">Demo<a class="anchor" aria-label="anchor" href="#demo"></a>
</h3>
<p>With <strong><code>ramp.xds</code></strong> it’s easy to build models
for the transmission dynamics and control of malaria or other
mosquito-borne pathogens.</p>
<p>Model building in <strong><code>ramp.xds</code></strong> starts with
a function called <code>xds_setup().</code></p>
<p>All of the arguments in <code><a href="../reference/xds_setup.html">xds_setup()</a></code> are assigned default
values, so calling <code><a href="../reference/xds_setup.html">xds_setup()</a></code> with no arguments returns a
fully configured model with all the default settings.</p>
<div class="sourceCode" id="cb3"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">model</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/xds_setup.html">xds_setup</a></span><span class="op">(</span><span class="op">)</span></span></code></pre></div>
<p>This object, called <code>model,</code> which was returned by
<code><a href="../reference/xds_setup.html">xds_setup()</a></code> is called a <strong><code>ramp</code></strong>
<em>model object:</em> it is a fully defined model that can be solved by
<code><a href="../reference/xds_solve.html">xds_solve()</a></code>.</p>
<p>At this point, <code>model</code> has an empty placeholder for
outputs:</p>
<div class="sourceCode" id="cb4"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">model</span><span class="op">$</span><span class="va">outputs</span> </span></code></pre></div>
<pre><code><span><span class="co">## list()</span></span></code></pre>
<p>Later, after solving the equations, it won’t be empty.</p>
<div class="section level4">
<h4 id="defaults">Defaults<a class="anchor" aria-label="anchor" href="#defaults"></a>
</h4>
<p>The arguments are stored and can be easily retrieved. The name of the
module for human / host infection and immune dynamics is stored as
<code>Xname.</code> The default module is the <code>SIS</code>
compartmental model:</p>
<div class="sourceCode" id="cb6"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">model</span><span class="op">$</span><span class="va">Xname</span></span></code></pre></div>
<pre><code><span><span class="co">## [1] "SIS"</span></span></code></pre>
<p><code>SIS</code> was set up with default parameter values, that can
be viewed with the function <code>get_Xpars</code>:</p>
<div class="sourceCode" id="cb8"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="../reference/get_Xpars.html">get_Xpars</a></span><span class="op">(</span><span class="va">model</span><span class="op">)</span></span></code></pre></div>
<pre><code><span><span class="co">## $b</span></span>
<span><span class="co">## [1] 0.55</span></span>
<span><span class="co">## </span></span>
<span><span class="co">## $c</span></span>
<span><span class="co">## [1] 0.15</span></span>
<span><span class="co">## </span></span>
<span><span class="co">## $r</span></span>
<span><span class="co">## [1] 0.005555556</span></span></code></pre>
<p>By examining The parameters are stored as
<code>model$Xpar[[i]],</code> for the
<math display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><msup><mi>i</mi><mrow><mi>t</mi><mi>h</mi></mrow></msup><annotation encoding="application/x-tex">i^{th}</annotation></semantics></math>
species. Knowing the names, the parameters can then be viewed (or
changed):</p>
<div class="sourceCode" id="cb10"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">model</span><span class="op">$</span><span class="va">Xpar</span><span class="op">[[</span><span class="fl">1</span><span class="op">]</span><span class="op">]</span><span class="op">$</span><span class="va">r</span></span></code></pre></div>
<pre><code><span><span class="co">## [1] 0.005555556</span></span></code></pre>
<p>The defaults can be over-written at setup by passing
<code>Xopts = list(...)</code> with different values:</p>
<div class="sourceCode" id="cb12"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">Xo</span> <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span>b<span class="op">=</span><span class="fl">1</span><span class="op">/</span><span class="fl">150</span>, c<span class="op">=</span><span class="fl">0.2</span>, b<span class="op">=</span><span class="fl">0.6</span><span class="op">)</span></span>
<span><span class="va">model1</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/xds_setup.html">xds_setup</a></span><span class="op">(</span>Xopts <span class="op">=</span> <span class="va">Xo</span><span class="op">)</span></span>
<span><span class="fu"><a href="../reference/get_Xpars.html">get_Xpars</a></span><span class="op">(</span><span class="va">model1</span><span class="op">)</span></span></code></pre></div>
<pre><code><span><span class="co">## $b</span></span>
<span><span class="co">## [1] 0.006666667</span></span>
<span><span class="co">## </span></span>
<span><span class="co">## $c</span></span>
<span><span class="co">## [1] 0.2</span></span>
<span><span class="co">## </span></span>
<span><span class="co">## $r</span></span>
<span><span class="co">## [1] 0.005555556</span></span></code></pre>
<p>The name of the default module for adult mosquito ecology and
infection dynamics is called <code>MYZname.</code> The default module is
Macdonald’s model:</p>
<div class="sourceCode" id="cb14"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">model</span><span class="op">$</span><span class="va">MYZname</span></span></code></pre></div>
<pre><code><span><span class="co">## [1] "macdonald"</span></span></code></pre>
<p>The design pattern is followed: once again, parameters can be viewed
with <code>get_MYZpars</code> and the method for setting parameter
values by passing a named list of values to <code>MYZopts</code> in
<code><a href="../reference/xds_setup.html">xds_setup()</a></code></p>
<p>The name of the default module for aquatic mosquito ecology is called
<code>Lname.</code> The default module is the <code>trivial</code>
module:</p>
<div class="sourceCode" id="cb16"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">model</span><span class="op">$</span><span class="va">Lname</span></span></code></pre></div>
<pre><code><span><span class="co">## [1] "trivial"</span></span></code></pre>
<p>For the <code>trivial</code> module, arguments passed at the command
line configure functions that pass values to other dynamical
components.</p>
<p>The design pattern is followed: parameters can be viewed with
<code>get_Lpars</code> and the method for setting parameter values by
passing a named list of values to <code>Lopts</code> in
<code><a href="../reference/xds_setup.html">xds_setup()</a></code></p>
</div>
<div class="section level4">
<h4 id="solving">Solving<a class="anchor" aria-label="anchor" href="#solving"></a>
</h4>
<p>The function <code>xds_solve(model)</code> returns the model object
with the solutions to the <em>initial value problem(s)</em> for the
model defined by <code>model</code> attached as
<code>model$outputs.</code> In other words, it solves the equations
using <code>deSolve</code> to return the values of the variables at a
set of time points, given a set of inital values. Calling it with only
one argument, <code>model,</code> solves the initial value problem for
the default set of time points daily outputs for one year:</p>
<div class="sourceCode" id="cb18"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">model</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/xds_solve.html">xds_solve</a></span><span class="op">(</span><span class="va">model</span><span class="op">)</span> </span></code></pre></div>
<p>Note that <code>model</code> was passed to <code>xds_solve,</code>
and the return value replaces <code>model.</code> Before
<code>xds_solve,</code> <code>model$outputs</code> was an empty list.
After solving, the outputs are stored as <code>model$outputs</code>:</p>
<div class="sourceCode" id="cb19"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/base/names.html" class="external-link">names</a></span><span class="op">(</span><span class="va">model</span><span class="op">$</span><span class="va">outputs</span><span class="op">)</span></span></code></pre></div>
<pre><code><span><span class="co">## [1] "time"   "last_y" "orbits" "terms"  "deout"</span></span></code></pre>
<p>The outputs from solving a system of equations include:</p>
<ul>
<li>
<code>time</code> – are the time points when the values of the
dependent variables were evaluated</li>
<li>
<code>last_y</code> – is the dependent variables at the last time
point: the last state of the system<br>
</li>
<li>
<code>orbits</code> – are the solutions with the variables parsed by
name</li>
<li>
<code>terms</code> – the dynamical terms describing transmission,
including the EIR.</li>
<li>
<code>deout</code> – the raw (unparsed) outputs</li>
</ul>
<p>Note that the <code>time</code> holds the default values of the
independent variable time where we solved the initial value problem for
the dependent variables.</p>
<div class="sourceCode" id="cb21"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/utils/head.html" class="external-link">head</a></span><span class="op">(</span><span class="va">model</span><span class="op">$</span><span class="va">outputs</span><span class="op">$</span><span class="va">time</span>, <span class="fl">5</span><span class="op">)</span></span></code></pre></div>
<pre><code><span><span class="co">## [1] 0 1 2 3 4</span></span></code></pre>
<div class="sourceCode" id="cb23"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/utils/head.html" class="external-link">tail</a></span><span class="op">(</span><span class="va">model</span><span class="op">$</span><span class="va">outputs</span><span class="op">$</span><span class="va">time</span>, <span class="fl">3</span><span class="op">)</span></span></code></pre></div>
<pre><code><span><span class="co">## [1] 363 364 365</span></span></code></pre>
<p>When <code>xds_solve</code> is called, the <strong><code>xds</code>
model object</strong> it returns has replaced any old values. If nothing
has changed, then the outputs will be identical.</p>
<p>On the other hand, if anything has changed, any old outputs will get
replaced. If the outputs need to be saved for future analyses, the user
will probably have to write a wrapper function that extracts and saves
it.</p>
</div>
<div class="section level4">
<h4 id="parsing">Parsing<a class="anchor" aria-label="anchor" href="#parsing"></a>
</h4>
<p>To make it easy to deal with the outputs, the dependent variables are
parsed and returned in named lists. <code>xde_solve()</code> also
computes some standard <em>terms</em> that are likely to be of
interest.</p>
<p>Functions like <code><a href="../reference/get_EIR.html">get_EIR()</a></code> make it easy to examine or save
a set of standard outputs without delving into the details.</p>
<div class="sourceCode" id="cb25"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/utils/head.html" class="external-link">head</a></span><span class="op">(</span><span class="fu"><a href="../reference/get_EIR.html">get_EIR</a></span><span class="op">(</span><span class="va">model</span><span class="op">)</span>, <span class="fl">3</span><span class="op">)</span></span></code></pre></div>
<pre><code><span><span class="co">##              [,1]</span></span>
<span><span class="co">## [1,] 0.0002850000</span></span>
<span><span class="co">## [2,] 0.0002622311</span></span>
<span><span class="co">## [3,] 0.0002412851</span></span></code></pre>
</div>
<div class="section level4">
<h4 id="visualizing">Visualizing<a class="anchor" aria-label="anchor" href="#visualizing"></a>
</h4>
<p><strong><code>ramp.xds</code></strong> includes functions to plot
standard outputs:</p>
<ul>
<li><p><code>xds_plot_X</code> plots the density of infected
individuals</p></li>
<li><p><code>xds_plot_M</code> plots the density of adult female
mosquitoes in each patch</p></li>
<li><p><code>xds_plot_Y</code> plots the density of infected adult
female mosquitoes in each patch</p></li>
<li><p><code>xds_plot_Z</code> plots the density of infectious adult
female mosquitoes in each patch</p></li>
<li><p><code>xds_plot_PR</code> plots the true prevalence of infection
in the human / host population</p></li>
<li><p><code>xds_plot_EIR</code> plots the EIR for each one of the human
/ host population strata</p></li>
</ul>
<div class="sourceCode" id="cb27"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/graphics/par.html" class="external-link">par</a></span><span class="op">(</span>mfrow <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">2</span>,<span class="fl">2</span><span class="op">)</span><span class="op">)</span></span>
<span><span class="fu"><a href="../reference/xds_plot_X.html">xds_plot_X</a></span><span class="op">(</span><span class="va">model</span><span class="op">)</span></span>
<span><span class="fu"><a href="../reference/xds_plot_M.html">xds_plot_M</a></span><span class="op">(</span><span class="va">model</span><span class="op">)</span></span>
<span><span class="fu"><a href="../reference/xds_plot_Y.html">xds_plot_Y</a></span><span class="op">(</span><span class="va">model</span>, add<span class="op">=</span><span class="cn">T</span><span class="op">)</span></span>
<span><span class="fu"><a href="../reference/xds_plot_Z.html">xds_plot_Z</a></span><span class="op">(</span><span class="va">model</span>, add<span class="op">=</span><span class="cn">T</span><span class="op">)</span></span>
<span><span class="fu"><a href="../reference/xds_plot_PR.html">xds_plot_PR</a></span><span class="op">(</span><span class="va">model</span><span class="op">)</span></span>
<span><span class="fu"><a href="../reference/xds_plot_EIR.html">xds_plot_EIR</a></span><span class="op">(</span><span class="va">model</span><span class="op">)</span></span></code></pre></div>
<div class="figure">
<img src="GettingStarted_files/figure-html/unnamed-chunk-16-1.png" alt="**Figure 1:** Plotting standard outputs" width="576"><p class="caption">
<strong>Figure 1:</strong> Plotting standard outputs
</p>
</div>
</div>
<div class="section level4">
<h4 id="analysis">Analysis<a class="anchor" aria-label="anchor" href="#analysis"></a>
</h4>
</div>
</div>
<div class="section level3">
<h3 id="trivial-models-and-trace-functions">Trivial Models and Trace Functions<a class="anchor" aria-label="anchor" href="#trivial-models-and-trace-functions"></a>
</h3>
<p>The software was designed to be fully modular. A basic requirement
for full modularity is that every dynamical component must include a
<em>trace</em> module. In each <code>trace</code> module, no variables
are defined, but the dynamical terms needed by related dynamical
components include a fully configurable <em>trace</em> function. In
above example, the <span class="math inline">$\cal L$</span> component
was trivial, but we can create a new model by modifying the old one.
First, we define <code>F_season</code> and the mean values of
<code>Lambda</code></p>
<p>The generic format for seasonal functions is
<code>F_season(t, phase, season_opts),</code> where <code>phase</code>
sets the phase (time of year), and <code>season_opts</code> is a set of
configurable parameter values:</p>
<div class="sourceCode" id="cb28"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span> <span class="va">F_sp</span> <span class="op">=</span> <span class="kw">function</span><span class="op">(</span><span class="va">t</span>, <span class="va">phase</span>, <span class="va">season_opts</span><span class="op">)</span><span class="op">{</span></span>
<span>   <span class="kw"><a href="https://rdrr.io/r/base/function.html" class="external-link">return</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/with.html" class="external-link">with</a></span><span class="op">(</span><span class="va">season_opts</span>,</span>
<span>          <span class="op">(</span><span class="fl">1</span><span class="op">+</span><span class="fu"><a href="https://rdrr.io/r/base/Trig.html" class="external-link">sin</a></span><span class="op">(</span><span class="fl">2</span><span class="op">*</span><span class="va">pi</span><span class="op">*</span><span class="op">(</span><span class="va">t</span><span class="op">+</span><span class="va">phase</span><span class="op">)</span><span class="op">/</span><span class="fl">365</span><span class="op">)</span><span class="op">)</span><span class="op">^</span><span class="va">pwr</span><span class="op">)</span><span class="op">)</span><span class="op">}</span> </span></code></pre></div>
<p>Having defined <code>F_sp,</code> we now attach it to a list of
options:</p>
<div class="sourceCode" id="cb29"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">Lo</span> <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span></span>
<span>       Lambda<span class="op">=</span><span class="fl">500</span>, </span>
<span>       phase<span class="op">=</span><span class="fl">90</span>, </span>
<span>       season_opts<span class="op">=</span><span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span>pwr<span class="op">=</span><span class="fl">2</span><span class="op">)</span>,</span>
<span>       F_season<span class="op">=</span><span class="va">F_sp</span></span>
<span>      <span class="op">)</span></span></code></pre></div>
<p>We use the first model as a template for the new model, but we have
replaced</p>
<div class="sourceCode" id="cb30"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">model_1</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/make_Lpar.html">make_Lpar</a></span><span class="op">(</span><span class="st">"trivial"</span>, <span class="va">model</span>, <span class="fl">1</span>, Lopts<span class="op">=</span><span class="va">Lo</span><span class="op">)</span></span>
<span><span class="va">model_1</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/last_to_inits.html">last_to_inits</a></span><span class="op">(</span><span class="va">model_1</span><span class="op">)</span></span></code></pre></div>
<div class="sourceCode" id="cb31"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">model_1</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/xds_solve.html">xds_solve</a></span><span class="op">(</span><span class="va">model_1</span>, Tmax<span class="op">=</span><span class="fl">365</span><span class="op">*</span><span class="fl">3</span><span class="op">)</span> </span></code></pre></div>
<div class="sourceCode" id="cb32"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/graphics/par.html" class="external-link">par</a></span><span class="op">(</span>mfrow <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">1</span>,<span class="fl">2</span><span class="op">)</span><span class="op">)</span></span>
<span><span class="fu"><a href="../reference/xds_plot_X.html">xds_plot_X</a></span><span class="op">(</span><span class="va">model_1</span><span class="op">)</span></span>
<span><span class="fu"><a href="../reference/xds_plot_M.html">xds_plot_M</a></span><span class="op">(</span><span class="va">model_1</span><span class="op">)</span></span>
<span><span class="fu"><a href="../reference/xds_plot_Y.html">xds_plot_Y</a></span><span class="op">(</span><span class="va">model_1</span>, add<span class="op">=</span><span class="cn">T</span><span class="op">)</span></span>
<span><span class="fu"><a href="../reference/xds_plot_Z.html">xds_plot_Z</a></span><span class="op">(</span><span class="va">model_1</span>, add<span class="op">=</span><span class="cn">T</span><span class="op">)</span></span></code></pre></div>
<div class="figure">
<img src="GettingStarted_files/figure-html/unnamed-chunk-21-1.png" alt="**Figure 2:** Outputs with Seasonal Forced Emergence using a Trace Function" width="576"><p class="caption">
<strong>Figure 2:</strong> Outputs with Seasonal Forced Emergence using
a Trace Function
</p>
</div>
<p>For more information, see the vignette <a href="https://dd-harp.github.io/ramp.xds/articles/TraceFunctions.html">Trace
Functions</a></p>
</div>
<div class="section level3">
<h3 id="model-building">Model Building<a class="anchor" aria-label="anchor" href="#model-building"></a>
</h3>
<p>From a design perspective, the setup interface can’t possibly
anticipate the needs of every end user. Instead, it has adopted a system
for setting up models based on the principle of <em>scaling
complexity:</em> the framework regards a subset of the universe of
possible models as a nested, hierarchical set. In some limiting case,
some complex model are equivalent to a simpler model. Rather than try to
build one big supermodel, the framework envisions the software around
<strong>modules</strong> for the <strong>dynamical components</strong>
that define <em>model families</em> at varying levels of complexity.</p>
<p>In general, a module is an element in the model library. It defines a
<em>model family.</em> If <code>nStrata=1,</code> it represents a set of
states and transitions describing a single population in the form of a
system of differential or difference equations. For example, the
<code>SIS</code> module for the <span class="math inline">$\cal
X$</span> component is the <em>SIS</em> compartmental model family for
human infections. It’s called a model family because each unique set of
parameters would define a different <em>model.</em></p>
<p>In its simplest form, each model family represents the state of a
single population. In practice, a single population is subdivided into
sub-populations: human population strata or adult mosquitoes in patches
or immature mosquitoes in aquatic habitats. In
<strong><code>ramp.xds</code></strong> it is comparatively simple to
configure a model with multiple strata, patches, and habitats.</p>
<p>Each model developed in <strong><code>ramp.xds</code></strong> is
thus characterized by:</p>
<ul>
<li><p>The choice of <em>model family</em> for each dynamical component
and the model parameters.</p></li>
<li><p>The model structure, including the number of patches, the number
of habitats and their membership in the patches, and the number of human
population strata and their residency within the strata.</p></li>
<li><p>Functions that define exogenous variables and functional
responses that drive exogenous forcing by weather and malaria
control.</p></li>
</ul>
<p>The concept for designing a setup interface to support complexity
scaling in model building works bass ackwards. The framework was
designed around models that could be linked to serve as a platform that
could explore models of unbounded realism and complexity, but it would
need to start very simple. To work out all the kinks, the software would
have to build in ports and junctions that could handle a large set of
advanced features, but most of these features would be turned off for
basic setup. Model building is handled in two steps:</p>
<ul>
<li><p><strong>Basic Setup</strong> is handled by the function
<code>xds_setup().</code> It’s designed to help a user get started with
a properly formulated interface that can handle spatial dynamics,
structured aquatic habitats, and a stratified human population</p></li>
<li><p><strong>Advanced Setup</strong> handles exogenous forcing, vector
control, and other modes of malaria control, human demography and aging,
and host population stratification.</p></li>
</ul>
<p>Another set of functions has been developed to work with models. See
the related vignette <a href="Working.html">Working with Models.</a>
Also, see the related software package <a href="https://dd-harp.github.io/ramp.work/" class="external-link"><strong><code>ramp.work</code></strong></a>.</p>
<div class="section level4">
<h4 id="modularity">Modularity<a class="anchor" aria-label="anchor" href="#modularity"></a>
</h4>
<p>The framework is designed around five dynamical components organized
into three chunks:</p>
<ol style="list-style-type: decimal">
<li>
<p>The vertebrate host population, denoted <span class="math inline">$\cal XH$</span>:</p>
<ul>
<li><p>human (or host) demography (<span class="math inline">$\cal
H$</span>) including births, deaths, aging and migration;</p></li>
<li><p>malaria epidemiology (<span class="math inline">$\cal X$</span>),
in the narrow sense; or more generally, the dynamics of infection and
immunity in the host population;</p></li>
</ul>
</li>
<li>
<p>The adult mosquito population, denoted <span class="math inline">$\cal MYZ$</span>:</p>
<ul>
<li><p>mosquito ecology (<span class="math inline">$\cal
M$</span>)</p></li>
<li><p>mosquito infection dynamics (<span class="math inline">$\cal
Y$</span>)</p></li>
</ul>
</li>
<li><p>Aquatic mosquito ecology, denoted <span class="math inline">$\cal
L$</span></p></li>
</ol>
<p>These three chunks are connected by two interfaces. The first two
chunks are connected through the rigid interface describing blood
feeding and transmission, denoted <span class="math inline">$\cal
B$</span>. The last two chunks are connected through egg laying and
emergence, <span class="math inline">$\cal N, U$</span>.</p>
<hr>
<div class="float">
<img src="notation1.png" alt="Figure 2 Modular dynamic components that form the core of ramp.xds"><div class="figcaption">
<strong>Figure 2</strong> Modular dynamic
components that form the core of
<strong><code>ramp.xds</code></strong>
</div>
</div>
<hr>
</div>
<div class="section level4">
<h4 id="basic-setup">Basic Setup<a class="anchor" aria-label="anchor" href="#basic-setup"></a>
</h4>
<p><em>For our purposes, <strong>Basic Setup</strong> encompasses the
configurable options in <code>xds_setup().</code></em></p>
<p>Which model was setup and solved in the demo above? The software
supports a modular framework for model building that is highly flexible
and extensible. It’s capable of building very capable models, but the
software embraces a model-building philosophy of starting simple and
adding realism or complexity one step at a time.</p>
<p>The demo model, above, is one version of the Ross-Macdonald model. It
illustrates how the software has streamlined the process of building
fairly simple models. The following sections describe how to make
<strong><code>ramp.xds</code></strong> build models that are much more
complicated and realistic.</p>
<p>The <code><a href="../reference/xds_setup.html">xds_setup()</a></code> function
<strong><code>ramp.xds</code></strong> has assigned default options for
everything. Each model must configure three dynamical components: human
epidemiology; adult mosquito ecology and infection dynamics; and aquatic
mosquito ecology. Each one of these three dynamical component is
configured by specifying a model name (as a string) and options, passed
as a named list, to override the defaults for the model:</p>
<ul>
<li><p><code>Xname</code> dispatches a model family for parasitic
infections and immunity in the human population, called <span class="math inline">$\cal X.$</span> The setup default model is
<code>Xname="SIS"</code> and default parameters for the <code>SIS</code>
model are defined in <code>create_Xpar_SIS.</code> To replace the
default values at setup, a named list can be passed as
<code>Xopts = list(...)</code> and the named values in
<code>Xopts</code> will be used instead of the defaults. (The human
demographic model, <span class="math inline">$\cal H$</span> is set up
as an advanced option.)</p></li>
<li><p><code>MYZname</code> dispatches a model family for adult mosquito
ecology and parasite infection dynamics, <span class="math inline">$\cal
MYZ.$</span> The setup default model is <code>MYZname="macdonald"</code>
and default parameters for the <code>macdonald</code> model are defined
in <code>create_MYZpar_macdonald.</code> To replace the default values
at setup, a named list can be passed as <code>MYZopts = list(...)</code>
and the named values in <code>MYZopts</code> will be used instead of the
defaults.</p></li>
<li><p><code>Lname</code> specifies a model family for aquatic mosquito
ecology, <span class="math inline">$\cal L.$</span> The setup default
model is the trivial model <code>Lname = "trivial"</code>. It has no
variables, but it passes the outputs – emerging adults – as a parameter.
To replace the default values at setup, a named list can be passed as
<code>Lopts = list(...)</code> and the values in <code>Lopts</code> will
be used instead of the defaults.</p></li>
</ul>
<p>Thu function call:</p>
<div class="sourceCode" id="cb33"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">model1</span> <span class="op">=</span> <span class="fu"><a href="../reference/xds_setup.html">xds_setup</a></span><span class="op">(</span><span class="op">)</span></span></code></pre></div>
<p>returns the same values as the function call:</p>
<div class="sourceCode" id="cb34"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">model2</span> <span class="op">=</span> <span class="fu"><a href="../reference/xds_setup.html">xds_setup</a></span><span class="op">(</span>Xname <span class="op">=</span> <span class="st">"SIS"</span>, MYZname <span class="op">=</span> <span class="st">"macdonald"</span>, Lname <span class="op">=</span> <span class="st">"trivial"</span><span class="op">)</span></span></code></pre></div>
<p><strong>Structural Parameters</strong> are also configured using
<code>xde_setup.</code> In basic setup, users can configure a malaria
landscape with <em>spatial dynamics,</em> structured <em>aquatic
habitats,</em> and <em>multiple human / host</em> population strata.
Basic setup was developed to ensure that all interfaces are set up
properly when there are multiple patches, multiple habitats, multiple
population strata, and malaria importation. The framework follows the
mathematical formulas and (with small changes) the notation in <a href="">Wu SL, <em>et. al.</em> 2023</a></p>
<ul>
<li><p><strong><code>nPatches</code></strong> or
<math display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><msub><mi>n</mi><mi>p</mi></msub><annotation encoding="application/x-tex">n_p</annotation></semantics></math>
is the number of patches in the model.</p></li>
<li><p><strong><code>membership</code></strong> is set up by passing a
vector with the identity of patch where each habitat can be found, and
it sets up the habitat matrix, <span class="math inline">$\cal
N$</span>. Setup sets the value of a variable describing the number of
habitats,
<math display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><msub><mi>n</mi><mi>q</mi></msub><annotation encoding="application/x-tex">n_q</annotation></semantics></math>
= <strong><code>nHabitats &lt;- length(membership)</code>.</strong> One
configurable option is <strong><code>searchQ</code></strong> with the
habitat search weights.</p></li>
<li><p><strong><code>HPop</code></strong> is a vector with human
population density, and <strong><code>residence</code></strong> is a
vector describing the location of the patch where each stratum resides.
Setup checks that <code>length(HPop) == length(residence)</code> and
sets the number of strata,
<math display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><msub><mi>n</mi><mi>h</mi></msub><annotation encoding="application/x-tex">n_h</annotation></semantics></math>
or <strong><code>nStrata &lt;- length(residence)</code>.</strong> It is
also possible to configure heterogeneous biting at the command line by
passing <strong><code>searchH</code></strong></p></li>
<li>
<p>If <code>nPatches &gt;1</code> then other setup-configurable
options are to pass:</p>
<ul>
<li><p>a matrix <code>calK</code> describing mosquito dispersal among
the patches.</p></li>
<li><p>a matrix <code>TimeSpent</code> can be passed to configure human
time spent</p></li>
</ul>
</li>
</ul>
<p>To learn more, we suggest taking a look at the <a href="https://dd-harp.github.io/ramp.xds/articles/ex_534.html">5-3-4
Vignette</a>, a model with 5 aquatic habitats, 3 patches, and 4 human
population strata.</p>
</div>
</div>
<div class="section level3">
<h3 id="using-basic-setup">Using Basic Setup<a class="anchor" aria-label="anchor" href="#using-basic-setup"></a>
</h3>
<div class="section level4">
<h4 id="spatial-mosquito-ecology">Spatial Mosquito Ecology<a class="anchor" aria-label="anchor" href="#spatial-mosquito-ecology"></a>
</h4>
<p>In <strong><code>ramp.xds</code>,</strong> mosquito spatial ecology
is implemented in a patch-based simulation model: a spatial domain is
subdivided into patches; and each patch contains an arbitrary number of
habitats.</p>
</div>
<div class="section level4">
<h4 id="spatial-transmission-dynamics">Spatial Transmission Dynamics<a class="anchor" aria-label="anchor" href="#spatial-transmission-dynamics"></a>
</h4>
<p>In <strong><code>ramp.xds</code>,</strong> malaria spatial dynamics
are implemented through a model of blood feeding in a patch-based
simulation model.</p>
<div class="sourceCode" id="cb35"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">model5</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/xds_setup.html">xds_setup</a></span><span class="op">(</span>nPatches<span class="op">=</span><span class="fl">4</span><span class="op">)</span></span></code></pre></div>
</div>
<div class="section level4">
<h4 id="human-host-population-strata">Human / Host Population Strata<a class="anchor" aria-label="anchor" href="#human-host-population-strata"></a>
</h4>
</div>
</div>
<div class="section level3">
<h3 id="advanced-setup">Advanced Setup<a class="anchor" aria-label="anchor" href="#advanced-setup"></a>
</h3>
<p><em><strong>NOTE:</strong> As demos for these advanced options get
developed, we will add the links here.</em></p>
<p><strong>Advanced Setup Options:</strong> During basic setup, two
advanced options can be configured, but most of the advanced options
must be added after basic setup.</p>
<div class="section level4">
<h4 id="spatial-dynamics">Spatial Dynamics<a class="anchor" aria-label="anchor" href="#spatial-dynamics"></a>
</h4>
<ul>
<li><p><strong>Spatial Heterogeneity</strong> –</p></li>
<li><p><strong>Human Mobility</strong> –</p></li>
<li>
<p><strong>Malaria Importation</strong> includes <em>travel</em> and
<em>visitors</em></p>
<ul>
<li><p><em>Travel Malaria</em> –In basic setup, travel malaria is set up
to model exposure while traveling, but time spent traveling and the
travel FoI are set to zero.</p></li>
<li><p><em>Visiting</em> – In basic setup, visiting is set up but the
availability of visitors is set to zero.</p></li>
</ul>
</li>
<li><p><strong>Exposure</strong> – Since catch counts data for
mosquitoes are usually well-described by the negative binomial
distribution family, <strong><code>ramp.xds</code></strong> has
implemented a step between the computation of the EIR and the FoI to
model <a href="https://dd-harp.github.io/ramp.xds/articles/heterogeneous_transmission.html#environmental-heterogeneity-in-exposure"><em>environmental
heterogeneity</em></a> based on a probability distribution function
describing the number of infective bites per person. By default,
<code>xds_setup</code> configures a Poisson model, but this can be
changed.</p></li>
<li>
<p><strong>Human Demography</strong> – In basic setup, the human
demographic model is the <em>trivial</em> model, but it can be
configured to include</p>
<ul>
<li><p>Vital dynamics: births, deaths</p></li>
<li><p>Migration</p></li>
<li><p>Cohort dynamics and aging</p></li>
<li><p>Pregnancy</p></li>
</ul>
</li>
<li><p><strong>Forcing</strong> – set up exogenous forcing, including
<em>exogenous variables</em> (<em>e.g.</em> weather and hydrology) and
the <em>functional responses</em> to compute mosquito bionomic
parameters</p></li>
<li><p><strong>Vector Control</strong> – set up vector control,
including</p></li>
<li><p><strong>Health Systems</strong> – a variety of functions to
handle surveillance and malaria control through health systems,
including care seeking, mass vaccination, IPTp</p></li>
<li><p><strong>Multiple Vector Species</strong> – Each vector species
has spatial structure, but it is also possible to configure other vector
species (or type).</p></li>
<li><p><strong>Multiple Host Species</strong> – Each host species can be
stratified, but it is also possible to configure other host species (or
types) to make setup and configuration easier.</p></li>
</ul>
<hr>
<div class="float">
<img src="ModularGeneralized.png" alt="Figure 3 – The modular structure and extensibility of ramp.xds."><div class="figcaption">
<strong>Figure 3</strong> – The modular
structure and extensibility of
<strong><code>ramp.xds</code></strong>.</div>
</div>
</div>
</div>
</div>
  </div>

  <div class="col-md-3 hidden-xs hidden-sm" id="pkgdown-sidebar">

      </div>

</div>



      <footer><div class="copyright">
  <p></p>
<p>Developed by Sean L. Wu, David L. Smith.</p>
</div>

<div class="pkgdown">
  <p></p>
<p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.1.1.</p>
</div>

      </footer>
</div>






  </body>
</html>
